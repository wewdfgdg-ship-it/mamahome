<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>localStorage ì´ˆê¸°í™”</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
            text-align: center;
        }
        .storage-info {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .storage-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }
        .storage-item:last-child {
            border-bottom: none;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        button {
            flex: 1;
            padding: 12px 20px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        .btn-clear-all {
            background: #ff4757;
            color: white;
        }
        .btn-clear-all:hover {
            background: #ff3838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
        }
        .btn-clear-orders {
            background: #ffa502;
            color: white;
        }
        .btn-clear-orders:hover {
            background: #ff8c00;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 165, 2, 0.4);
        }
        .btn-refresh {
            background: #00b894;
            color: white;
        }
        .btn-refresh:hover {
            background: #00a383;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.4);
        }
        .message {
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-weight: 500;
            display: none;
        }
        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }
        .key-name {
            font-family: 'Courier New', monospace;
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—‘ï¸ localStorage ê´€ë¦¬</h1>

        <div class="storage-info">
            <h3 style="margin-top: 0;">í˜„ì¬ ì €ì¥ëœ ë°ì´í„°:</h3>
            <div id="storageList"></div>
        </div>

        <div class="button-group">
            <button class="btn-clear-orders" onclick="clearOrders()">
                ğŸ“¦ ì£¼ë¬¸ ë°ì´í„°ë§Œ ì‚­ì œ
            </button>
            <button class="btn-clear-all" onclick="clearAll()">
                ğŸ’£ ì „ì²´ ì‚­ì œ
            </button>
            <button class="btn-refresh" onclick="refreshList()">
                ğŸ”„ ìƒˆë¡œê³ ì¹¨
            </button>
        </div>

        <div id="message" class="message"></div>
    </div>

    <script>
        // localStorage ëª©ë¡ í‘œì‹œ
        function refreshList() {
            const storageList = document.getElementById('storageList');
            const keys = Object.keys(localStorage);

            if (keys.length === 0) {
                storageList.innerHTML = '<p style="color: #666;">ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                storageList.innerHTML = keys.map(key => {
                    let size = '';
                    try {
                        const value = localStorage.getItem(key);
                        size = value ? `(${(value.length / 1024).toFixed(2)} KB)` : '';
                    } catch (e) {
                        size = '(í¬ê¸° ê³„ì‚° ë¶ˆê°€)';
                    }
                    return `
                        <div class="storage-item">
                            <span class="key-name">${key}</span>
                            <span style="color: #666; font-size: 14px;">${size}</span>
                        </div>
                    `;
                }).join('');
            }
        }

        // ì£¼ë¬¸ ê´€ë ¨ ë°ì´í„°ë§Œ ì‚­ì œ
        function clearOrders() {
            const orderKeys = ['orders', 'checkoutData', 'userInfo', 'cart', 'recentOrder'];
            let deletedCount = 0;

            orderKeys.forEach(key => {
                if (localStorage.getItem(key)) {
                    localStorage.removeItem(key);
                    deletedCount++;
                    console.log(`âœ… ${key} ì‚­ì œë¨`);
                }
            });

            showMessage(`ì£¼ë¬¸ ê´€ë ¨ ë°ì´í„° ${deletedCount}ê°œ í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            refreshList();
        }

        // ì „ì²´ ì‚­ì œ
        function clearAll() {
            const count = Object.keys(localStorage).length;
            localStorage.clear();
            showMessage(`ì „ì²´ ${count}ê°œ í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            refreshList();
        }

        // ë©”ì‹œì§€ í‘œì‹œ
        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;

            setTimeout(() => {
                messageEl.className = 'message';
            }, 3000);
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ëª©ë¡ í‘œì‹œ
        refreshList();

        // 5ì´ˆë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨
        setInterval(refreshList, 5000);
    </script>
</body>
</html>