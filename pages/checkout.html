<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²°ì œí•˜ê¸° - Mrble</title>
    
    <!-- í°íŠ¸ ë¡œë“œ (ë¹„ë™ê¸° ë¡œë“œ ë° ìµœì í™”) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;900&family=Poppins:wght@400;500;600;700;800;900&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Common Header CSS -->
    <link rel="stylesheet" href="../css/common-header.css">
    
    <!-- í˜ì´ì•± ì„¤ì • -->
    <script>
        // config.js íŒŒì¼ì´ ì—†ì„ ë•Œë¥¼ ìœ„í•œ ê¸°ë³¸ ì„¤ì •
        if (typeof CONFIG === 'undefined') {
            const CONFIG = {
                userid: 'ksbm',
                linkkey: 'QLo9WUgFwaqAYjAiv6z86e1DPJnCCRVaOgT+oqg6zaM=',
                feedbackurl: '',  // ë¹ˆ ê°’ìœ¼ë¡œ ì„¤ì • (ì—ëŸ¬ 70080 ë°©ì§€)
                returnurl: '',  // ë™ì ìœ¼ë¡œ ì„¤ì •ë¨
                environment: 'production'
            };
            window.CONFIG = CONFIG;
        }
    </script>
    <script src="../config.js"></script>
    
    <!-- í˜ì´ì•± ì»¤ìŠ¤í…€ ê²°ì œ ëª¨ë“ˆ -->
    <script src="../js/payapp-payment.js"></script>
    
    <!-- í˜ì´ì•± ë¼ì´íŠ¸ SDK -->
    <script src="https://lite.payapp.kr/public/api/payapp-lite.js" defer></script>
    
    <!-- í˜ì´ì•± ì´ˆê¸°í™” -->
    <script>
        // PayApp SDK ì´ˆê¸°í™” ìƒíƒœ ì¶”ì 
        window.payAppReady = false;
        
        // PayApp SDK ì´ˆê¸°í™” í•¨ìˆ˜
        function initPayApp() {
            if (typeof PayApp !== 'undefined' && typeof CONFIG !== 'undefined') {
                console.log('âœ… PayApp ë¼ì´íŠ¸ SDK ë¡œë“œ ì™„ë£Œ');
                
                try {
                    // ê¸°ë³¸ ì„¤ì •
                    PayApp.setDefault('userid', CONFIG.userid);
                    PayApp.setDefault('shopname', 'Mrble');
                    console.log('âœ… PayApp ê¸°ë³¸ ì„¤ì • ì™„ë£Œ');
                    window.payAppReady = true;
                } catch (error) {
                    console.error('PayApp ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                }
            } else {
                console.warn('â³ PayApp SDK ë¡œë“œ ëŒ€ê¸° ì¤‘...');
                // ì¬ì‹œë„
                setTimeout(initPayApp, 100);
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ í›„ ì´ˆê¸°í™”
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initPayApp);
        } else {
            initPayApp();
        }
    </script>
    
    <!-- CSS ìµœì í™”: preload ì‚¬ìš© -->
    <link rel="preload" href="../css/variables.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="../css/reset.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="../css/main.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/responsive.css">

    <!-- Auth Manager -->
    <script src="../js/auth.js"></script>

    <noscript>
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/reset.css">
        <link rel="stylesheet" href="../css/main.css">
    </noscript>
    
    <style>
        /* ê²°ì œ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
        
        /* í—¤ë” ë„¤ë¹„ê²Œì´ì…˜ í°íŠ¸ ìŠ¤íƒ€ì¼ - ë©”ì¸ê³¼ ë™ì¼í•˜ê²Œ */
        .nav-logo {
            font-size: 18px;
            white-space: nowrap;
        }
        
        .logo-text {
            font-size: 18px;
            font-weight: 600;
        }
        
        .nav-link {
            font-size: 14px;
        }
        
        .checkout-page {
            background: rgba(245, 245, 247, 0.5);
            min-height: 100vh;
            padding-top: 100px;
            padding-bottom: var(--spacing-3xl);
        }
        
        .checkout-container {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: var(--spacing-2xl);
            align-items: start;
        }
        
        /* ì§„í–‰ ë‹¨ê³„ í‘œì‹œ */
        .checkout-steps {
            display: flex;
            justify-content: center;
            margin-bottom: var(--spacing-3xl);
            gap: var(--spacing-xl);
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--color-bg-primary);
            border: 2px solid var(--color-text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--color-text-muted);
            transition: var(--transition-default);
        }
        
        .step.active .step-number {
            background: var(--color-primary-main);
            border-color: var(--color-primary-main);
            color: var(--color-text-light);
        }
        
        .step.completed .step-number {
            background: var(--color-primary-main);
            border-color: var(--color-primary-main);
            color: var(--color-text-light);
        }
        
        .step-label {
            font-weight: 500;
            color: var(--color-text-muted);
            transition: var(--transition-default);
        }
        
        .step.active .step-label {
            color: var(--color-text-primary);
        }
        
        .step-arrow {
            color: var(--color-text-muted);
            margin: 0 var(--spacing-md);
        }
        
        /* ë©”ì¸ í¼ ì˜ì—­ */
        .checkout-main {
            background: var(--color-bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            box-shadow: var(--shadow-sm);
        }
        
        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            color: var(--color-text-primary);
            padding-bottom: var(--spacing-sm);
            border-bottom: 2px solid var(--color-primary-main);
        }
        
        /* í¼ ìŠ¤íƒ€ì¼ */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }
        
        .form-row.single {
            grid-template-columns: 1fr;
        }
        
        .form-group {
            margin-bottom: var(--spacing-md);
        }
        
        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
            color: var(--color-text-primary);
            font-size: 14px;
        }
        
        .form-label .required {
            color: #ff3b30;
        }
        
        .form-input,
        .form-select {
            width: 100%;
            padding: var(--spacing-sm);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: var(--radius-sm);
            font-size: 14px;
            transition: var(--transition-default);
            background: var(--color-bg-primary);
        }
        
        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--color-primary-main);
            box-shadow: 0 0 0 3px rgba(41, 212, 193, 0.1);
        }
        
        .form-textarea {
            width: 100%;
            min-height: 100px;
            padding: var(--spacing-sm);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: var(--radius-sm);
            font-size: 14px;
            resize: vertical;
            font-family: inherit;
        }
        
        /* ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ */
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
        }
        
        .payment-method {
            padding: var(--spacing-md);
            border: 2px solid rgba(0,0,0,0.1);
            border-radius: var(--radius-sm);
            text-align: center;
            cursor: pointer;
            transition: var(--transition-default);
            background: var(--color-bg-primary);
        }
        
        .payment-method:hover {
            border-color: var(--color-primary-main);
            background: rgba(41, 212, 193, 0.05);
        }
        
        .payment-method.selected {
            border-color: var(--color-primary-main);
            background: rgba(41, 212, 193, 0.1);
        }
        
        .payment-icon {
            font-size: 24px;
            margin-bottom: var(--spacing-xs);
        }
        
        .payment-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--color-text-primary);
        }
        
        /* ì£¼ë¬¸ ìš”ì•½ ì‚¬ì´ë“œë°” */
        .checkout-sidebar {
            position: sticky;
            top: 100px;
        }
        
        .order-summary {
            background: var(--color-bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            border: 2px solid var(--color-primary-main);
        }
        
        .summary-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            color: var(--color-text-primary);
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .summary-item:last-of-type {
            border-bottom: none;
        }
        
        .summary-label {
            color: var(--color-text-secondary);
            font-size: 14px;
        }
        
        .summary-value {
            font-weight: 500;
            color: var(--color-text-primary);
            font-size: 14px;
        }
        
        .summary-divider {
            height: 1px;
            background: rgba(0,0,0,0.1);
            margin: var(--spacing-md) 0;
        }
        
        .summary-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: var(--spacing-md);
        }
        
        .total-label {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary);
        }
        
        .total-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary-main);
            font-family: var(--font-tertiary);
        }
        
        /* ì•½ê´€ ë™ì˜ */
        .agreement-section {
            background: rgba(0,0,0,0.02);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }
        
        .checkbox-group {
            margin-bottom: var(--spacing-sm);
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            cursor: pointer;
            font-size: 14px;
            color: var(--color-text-primary);
        }
        
        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .agreement-all {
            font-weight: 600;
            padding-bottom: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        /* ì•ˆì „ ê²°ì œ ë°°ì§€ */
        .security-badges {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-md);
            border-top: 1px solid rgba(0,0,0,0.05);
        }
        
        .security-badge {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: 12px;
            color: var(--color-text-secondary);
        }
        
        .security-icon {
            color: var(--color-primary-main);
        }
        
        /* íŒ¨í‚¤ì§€ ì„ íƒ ìŠ¤íƒ€ì¼ */
        .package-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }
        
        .package-option {
            background: var(--color-bg-primary);
            border: 2px solid rgba(0,0,0,0.1);
            border-radius: var(--radius-lg);
            padding: calc(var(--spacing-lg) * 1.3) var(--spacing-lg);
            text-align: center;
            cursor: pointer;
            transition: var(--transition-default);
            position: relative;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .package-option:hover {
            border-color: var(--color-primary-main);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .package-option.selected {
            border: 3px solid var(--color-primary-main) !important;
            background: rgba(41, 212, 193, 0.08) !important;
            box-shadow: 0 0 0 4px rgba(41, 212, 193, 0.15) !important;
            transform: scale(1.02);
        }
        
        .package-badge {
            position: absolute;
            top: var(--spacing-sm);
            right: var(--spacing-sm);
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            font-family: var(--font-secondary);
        }
        
        .package-people {
            font-size: 32px;
            font-weight: 700;
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-sm);
            font-family: var(--font-tertiary);
        }
        
        .package-price-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-xs);
            margin-bottom: var(--spacing-xs);
        }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 1024px) {
            .checkout-container {
                grid-template-columns: 1fr;
            }
            
            .checkout-sidebar {
                position: static;
                order: -1;
            }
            
            .payment-methods {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .package-options {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 767px) {
            .checkout-steps {
                flex-direction: column;
                align-items: center;
            }
            
            .step-arrow {
                display: none;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .payment-methods {
                grid-template-columns: 1fr;
            }
            
            .checkout-main {
                padding: var(--spacing-md);
            }
        }
    </style>
</head>
<body>
    <!-- Common Header Container -->
    <div id="header-container"></div>
    <script src="../js/common-header.js"></script>

    <!-- AuthManager ë¡œë“œ (ì‚¬ìš©ì ì •ë³´ ìë™ ì…ë ¥ì„ ìœ„í•´ í•„ìš”) -->
    <script src="../js/auth.js"></script>
    
    <div class="checkout-page">
        <div class="container">
            <!-- ì§„í–‰ ë‹¨ê³„ -->
            <div class="checkout-steps">
                <div class="step completed">
                    <span class="step-number">âœ“</span>
                    <span class="step-label">íŒ¨í‚¤ì§€ ì„ íƒ</span>
                </div>
                <span class="step-arrow">â†’</span>
                <div class="step active">
                    <span class="step-number">2</span>
                    <span class="step-label">ì •ë³´ ì…ë ¥</span>
                </div>
                <span class="step-arrow">â†’</span>
                <div class="step">
                    <span class="step-number">3</span>
                    <span class="step-label">ê²°ì œ ì™„ë£Œ</span>
                </div>
            </div>
            
            <div class="checkout-container">
                <!-- ë©”ì¸ í¼ -->
                <div class="checkout-main">
                    <!-- íŒ¨í‚¤ì§€ ì„ íƒ -->
                    <section style="margin-bottom: var(--spacing-2xl);">
                        <h2 class="section-title">íŒ¨í‚¤ì§€ ì„ íƒ</h2>
                        <div class="package-options">
                            <!-- 60ëª… íŒ¨í‚¤ì§€ -->
                            <div class="package-option" data-people="60" data-original="600000" data-price="360000" data-discount="40">
                                <div class="package-badge" style="background: #ff3b30; color: var(--color-text-light);">40% í• ì¸</div>
                                <h3 class="package-people">60ëª…</h3>
                                <div class="package-price-info">
                                    <span class="original-price" style="text-decoration: line-through; color: var(--color-text-muted); font-size: 14px;">600,000ì›</span>
                                    <span class="discounted-price" style="color: var(--color-primary-main); font-size: 24px; font-weight: 700;">360,000ì›</span>
                                </div>
                                <p class="per-person" style="font-size: 12px; color: var(--color-text-secondary);">1ì¸ë‹¹ 6,000ì›</p>
                            </div>
                            
                            <!-- 30ëª… íŒ¨í‚¤ì§€ -->
                            <div class="package-option" data-people="30" data-original="300000" data-price="240000" data-discount="20">
                                <div class="package-badge" style="background: #ff9500; color: var(--color-text-light);">20% í• ì¸</div>
                                <h3 class="package-people">30ëª…</h3>
                                <div class="package-price-info">
                                    <span class="original-price" style="text-decoration: line-through; color: var(--color-text-muted); font-size: 14px;">300,000ì›</span>
                                    <span class="discounted-price" style="color: var(--color-primary-main); font-size: 24px; font-weight: 700;">240,000ì›</span>
                                </div>
                                <p class="per-person" style="font-size: 12px; color: var(--color-text-secondary);">1ì¸ë‹¹ 8,000ì›</p>
                            </div>
                            
                            <!-- 10ëª… íŒ¨í‚¤ì§€ -->
                            <div class="package-option" data-people="10" data-original="100000" data-price="100000" data-discount="0">
                                <h3 class="package-people">10ëª…</h3>
                                <div class="package-price-info">
                                    <span class="discounted-price" style="color: var(--color-primary-main); font-size: 24px; font-weight: 700;">100,000ì›</span>
                                </div>
                                <p class="per-person" style="font-size: 12px; color: var(--color-text-secondary);">1ì¸ë‹¹ 10,000ì›</p>
                            </div>
                        </div>
                    </section>
                    
                    <!-- ì£¼ë¬¸ì ì •ë³´ -->
                    <section>
                        <h2 class="section-title">ì£¼ë¬¸ì ì •ë³´</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">ì´ë¦„ <span class="required">*</span></label>
                                <input type="text" id="name" class="form-input" placeholder="í™ê¸¸ë™" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ì—°ë½ì²˜ <span class="required">*</span></label>
                                <input type="tel" id="phone" class="form-input" placeholder="010-0000-0000" maxlength="13" required>
                                <small class="form-hint" style="color: #999; font-size: 12px; margin-top: 4px; display: block;">ìˆ«ìë§Œ ì…ë ¥í•˜ì„¸ìš” (í•˜ì´í”ˆ ìë™ ì¶”ê°€)</small>
                            </div>
                        </div>
                        <div class="form-row single">
                            <div class="form-group">
                                <label class="form-label">ì´ë©”ì¼ <span class="required">*</span></label>
                                <input type="email" id="email" class="form-input" placeholder="example@email.com" required>
                                <small class="form-hint" style="color: #999; font-size: 12px; margin-top: 4px; display: block;">ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</small>
                            </div>
                        </div>
                        <!-- ë§¤ì¥ëª…ê³¼ ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ìˆ¨ê¹€ ì²˜ë¦¬ -->
                        <!--
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">ë§¤ì¥ëª…</label>
                                <input type="text" id="company" class="form-input" placeholder="íšŒì‚¬ëª… (ì„ íƒ)">
                            </div>
                            <div class="form-group">
                                <label class="form-label">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</label>
                                <input type="text" id="business-number" class="form-input" placeholder="000-00-00000" maxlength="12">
                                <small class="form-hint" style="color: #999; font-size: 12px; margin-top: 4px; display: block;">ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ ì‹œ í•„ìš”</small>
                            </div>
                        </div>
                        -->
                    </section>
                    
                    <!-- ì„œë¹„ìŠ¤ ì •ë³´ -->
                    <section style="margin-top: var(--spacing-2xl);">
                        <h2 class="section-title">ì„œë¹„ìŠ¤ ì •ë³´</h2>
                        <div class="form-row single">
                            <div class="form-group">
                                <label class="form-label">ë§¤ì¥ëª… / íšŒì‚¬ëª… <span class="required">*</span></label>
                                <input type="text" id="store-name" class="form-input" placeholder="ì˜ˆ: ê°•ë‚¨ì—­ OOì‹ë‹¹" required>
                            </div>
                        </div>
                        <div class="form-row single">
                            <div class="form-group">
                                <label class="form-label">ì—…ì¢… ì„ íƒ <span class="required">*</span></label>
                                <select id="business-type" class="form-select" required>
                                    <option value="">ì—…ì¢…ì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                    <option value="restaurant">ìŒì‹ì </option>
                                    <option value="cafe">ì¹´í˜</option>
                                    <option value="beauty">ë·°í‹°/ë¯¸ìš©</option>
                                    <option value="fashion">íŒ¨ì…˜</option>
                                    <option value="education">êµìœ¡</option>
                                    <option value="medical">ì˜ë£Œ/ê±´ê°•</option>
                                    <option value="realestate">ë¶€ë™ì‚°</option>
                                    <option value="other">ê¸°íƒ€</option>
                                </select>
                            </div>
                        </div>
                        <!-- í™ë³´í•  ìƒí’ˆ/ì„œë¹„ìŠ¤ëª…, ìš”ì²­ì‚¬í•­ ìˆ¨ê¹€ ì²˜ë¦¬ -->
                        <!--
                        <div class="form-row single">
                            <div class="form-group">
                                <label class="form-label">í™ë³´í•  ìƒí’ˆ/ì„œë¹„ìŠ¤ëª… <span class="required">*</span></label>
                                <input type="text" class="form-input" placeholder="ì˜ˆ: ê°•ë‚¨ì—­ ë§›ì§‘ OOì‹ë‹¹" required>
                            </div>
                        </div>
                        <div class="form-row single">
                            <div class="form-group">
                                <label class="form-label">ìš”ì²­ì‚¬í•­</label>
                                <textarea class="form-textarea" placeholder="íŠ¹ë³„íˆ ìš”ì²­í•˜ì‹¤ ì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ì„ íƒ)"></textarea>
                            </div>
                        </div>
                        -->
                    </section>
                    
                    <!-- ê²°ì œ ìˆ˜ë‹¨ -->
                    <section style="margin-top: var(--spacing-2xl);">
                        <h2 class="section-title">ê²°ì œ ìˆ˜ë‹¨</h2>
                        <div class="payment-methods">
                            <div class="payment-method selected">
                                <div class="payment-icon">ğŸ’³</div>
                                <div class="payment-name">ì‹ ìš©ì¹´ë“œ</div>
                            </div>
                            <div class="payment-method">
                                <div class="payment-icon">ğŸ¦</div>
                                <div class="payment-name">ê³„ì¢Œì´ì²´</div>
                            </div>
                            <!-- ì¹´ì¹´ì˜¤í˜ì´, ë„¤ì´ë²„í˜ì´, í† ìŠ¤í˜ì´, ì„¸ê¸ˆê³„ì‚°ì„œ ìˆ¨ê¹€ ì²˜ë¦¬ -->
                            <!--
                            <div class="payment-method">
                                <div class="payment-icon">ğŸ“±</div>
                                <div class="payment-name">ì¹´ì¹´ì˜¤í˜ì´</div>
                            </div>
                            <div class="payment-method">
                                <div class="payment-icon">ğŸ’š</div>
                                <div class="payment-name">ë„¤ì´ë²„í˜ì´</div>
                            </div>
                            <div class="payment-method">
                                <div class="payment-icon">ğŸ</div>
                                <div class="payment-name">í† ìŠ¤í˜ì´</div>
                            </div>
                            <div class="payment-method">
                                <div class="payment-icon">ğŸ“„</div>
                                <div class="payment-name">ì„¸ê¸ˆê³„ì‚°ì„œ</div>
                            </div>
                            -->
                        </div>
                    </section>
                    
                </div>
                
                <!-- ì£¼ë¬¸ ìš”ì•½ ì‚¬ì´ë“œë°” -->
                <div class="checkout-sidebar">
                    <div class="order-summary">
                        <h3 class="summary-title">ì£¼ë¬¸ ìš”ì•½</h3>
                        
                        <div id="summary-empty" style="padding: var(--spacing-xl); text-align: center; color: var(--color-text-secondary);">
                            <p>íŒ¨í‚¤ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
                        </div>
                        
                        <div id="summary-content" style="display: none;">
                            <div class="summary-item">
                                <span class="summary-label">ìƒí’ˆëª…</span>
                                <span class="summary-value">ë¸”ë¡œê·¸ ì²´í—˜ë‹¨</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">ì¸ì›ìˆ˜</span>
                                <span class="summary-value" id="summary-people">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">ì •ìƒê°€</span>
                                <span class="summary-value" id="summary-original" style="text-decoration: line-through; color: var(--color-text-muted);">-</span>
                            </div>
                            <div class="summary-item" id="discount-row" style="display: none;">
                                <span class="summary-label" id="discount-label">í• ì¸</span>
                                <span class="summary-value" id="summary-discount" style="color: #ff3b30;">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">ìƒí’ˆê¸ˆì•¡</span>
                                <span class="summary-value" id="summary-price" style="font-weight: 600;">-</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">ë¶€ê°€ì„¸ (10%)</span>
                                <span class="summary-value" id="summary-vat">-</span>
                            </div>
                            
                            <div class="summary-divider"></div>
                            
                            <div class="summary-total">
                                <span class="total-label">ìµœì¢… ê²°ì œê¸ˆì•¡</span>
                                <span class="total-value" id="summary-total">-</span>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary btn-large" 
                                style="width: 100%; 
                                       margin-top: var(--spacing-lg); 
                                       background: var(--color-primary-main); 
                                       color: var(--color-bg-primary);
                                       border: none;
                                       border-radius: var(--radius-md);
                                       padding: var(--spacing-md) var(--spacing-lg);
                                       font-size: 18px;
                                       font-weight: 700;
                                       cursor: pointer;
                                       transition: all 0.3s ease;
                                       box-shadow: 0 4px 12px rgba(41, 212, 193, 0.3);"
                                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(41, 212, 193, 0.4)';"
                                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(41, 212, 193, 0.3)';"
                                onclick="processPayment()">
                            ğŸ’³ ê²°ì œí•˜ê¸°
                        </button>
                        
                        <div class="security-badges">
                            <div class="security-badge">
                                <span class="security-icon">ğŸ”’</span>
                                <span>SSL ë³´ì•ˆê²°ì œ</span>
                            </div>
                            <div class="security-badge">
                                <span class="security-icon">âœ“</span>
                                <span>PGì‚¬ ì¸ì¦</span>
                            </div>
                        </div>
                        
                        <!-- ì•½ê´€ ë™ì˜ -->
                        <div class="agreement-section" style="margin-top: var(--spacing-lg); padding-top: var(--spacing-lg); border-top: 1px solid var(--color-border);">
                            <div class="checkbox-group agreement-all" style="margin-bottom: var(--spacing-sm); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--color-border);">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="agree-all">
                                    <span style="font-weight: 600;">ì „ì²´ ë™ì˜</span>
                                </label>
                            </div>
                            <div class="checkbox-group" style="margin-bottom: var(--spacing-xs);">
                                <label class="checkbox-label">
                                    <input type="checkbox" class="agree-item" required>
                                    <span style="font-size: 14px;">(í•„ìˆ˜) ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë™ì˜</span>
                                </label>
                            </div>
                            <div class="checkbox-group" style="margin-bottom: var(--spacing-xs);">
                                <label class="checkbox-label">
                                    <input type="checkbox" class="agree-item" required>
                                    <span style="font-size: 14px;">(í•„ìˆ˜) ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</span>
                                </label>
                            </div>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" class="agree-item">
                                    <span style="font-size: 14px;">(ì„ íƒ) ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ì‹¬í”Œ í‘¸í„° -->
    <footer class="simple-footer">
        <div class="container">
            <div class="footer-wrapper">
                <!-- Customer Service -->
                <div class="footer-customer">
                    <div class="footer-title">ë¯¸ë¸”ë¬¸ì˜</div>
                    <div class="footer-phone">010-7362-7711</div>
                    <!--<div class="footer-fax">Fax. 02-000-0000</div>"-->
                </div>
                
                <!-- Info -->
                <div class="footer-info">
                    <div class="footer-title">Info.</div>
                    <div class="footer-info-text">ìƒí˜¸ëª… : ë¯¸ë¸”(Mrble)  |  ëŒ€í‘œ : ì•ˆì†Œì—°  |  ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ : 165-88-02749</div>
                    <div class="footer-info-text">ì£¼ì†Œ : ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬ ì²œí˜¸ëŒ€ë¡œ 571 | ì „êµ­ ìµœì €ê°€ ì •ì§í•œ ì²´í—˜ë‹¨ ë§ˆì¼€íŒ… í”Œë«í¼</div>
                </div>
                
                <!-- Chart Icon -->
                <div class="footer-chart">
                    <div class="chart-bar"></div>
                    <div class="chart-bar"></div>
                    <div class="chart-bar"></div>
                    <div class="chart-bar"></div>
                </div>
            </div>
        </div>
    </footer>
    
    <script>
        // ë¹ ë¥¸ ì´ˆê¸°í™”ë¥¼ ìœ„í•´ DOMContentLoaded ì´ë²¤íŠ¸ ì‚¬ìš©
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                initializePage();
            });
        } else {
            // ì´ë¯¸ ë¡œë“œëœ ê²½ìš° ì¦‰ì‹œ ì‹¤í–‰
            initializePage();
        }
        
        // í˜ì´ì•± ì„¤ì • í™•ì¸ (config.jsì—ì„œ ì´ë¯¸ ë¡œë“œë¨)
        if (typeof CONFIG === 'undefined') {
            console.warn('config.js íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ ì„¤ì •ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.');
            window.CONFIG = {
                userid: 'meble_test',
                linkkey: '',
                feedbackurl: 'https://meble.kr/api/payment/callback',
                returnurl: 'https://meble.kr/payment-complete',
                environment: 'development'
            };
        }
        
        // íŒ¨í‚¤ì§€ ì„ íƒ ê¸°ëŠ¥
        const packageOptions = document.querySelectorAll('.package-option');
        let selectedPackage = null;
        
        console.log('íŒ¨í‚¤ì§€ ì˜µì…˜ ê°œìˆ˜:', packageOptions.length);
        
        packageOptions.forEach(option => {
            option.addEventListener('click', () => {
                console.log('íŒ¨í‚¤ì§€ í´ë¦­ë¨:', option.dataset.people);
                
                // ëª¨ë“  ì˜µì…˜ì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
                packageOptions.forEach(opt => opt.classList.remove('selected'));
                
                // ì„ íƒí•œ ì˜µì…˜ì— selected í´ë˜ìŠ¤ ì¶”ê°€
                option.classList.add('selected');
                
                // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const people = option.dataset.people;
                const originalPrice = parseInt(option.dataset.original);
                const price = parseInt(option.dataset.price);
                const discount = parseInt(option.dataset.discount);
                
                console.log('íŒ¨í‚¤ì§€ ë°ì´í„°:', { people, originalPrice, price, discount });
                
                // ì„ íƒëœ íŒ¨í‚¤ì§€ ì €ì¥
                selectedPackage = {
                    people: people,
                    originalPrice: originalPrice,
                    price: price,
                    discount: discount
                };
                
                // ì£¼ë¬¸ ìš”ì•½ ì—…ë°ì´íŠ¸
                updateOrderSummary();
            });
        });
        
        function updateOrderSummary() {
            console.log('updateOrderSummary í˜¸ì¶œë¨:', selectedPackage);
            if (!selectedPackage) return;
            
            // ë¹ˆ ë©”ì‹œì§€ ìˆ¨ê¸°ê³  ë‚´ìš© í‘œì‹œ
            document.getElementById('summary-empty').style.display = 'none';
            document.getElementById('summary-content').style.display = 'block';
            
            console.log('ì£¼ë¬¸ ìš”ì•½ ì—…ë°ì´íŠ¸ ì‹œì‘');
            
            // ì¸ì›ìˆ˜
            document.getElementById('summary-people').textContent = selectedPackage.people + 'ëª…';
            
            // ì •ìƒê°€
            document.getElementById('summary-original').textContent = selectedPackage.originalPrice.toLocaleString() + 'ì›';
            
            // í• ì¸
            if (selectedPackage.discount > 0) {
                document.getElementById('discount-row').style.display = 'flex';
                const discountAmount = selectedPackage.originalPrice - selectedPackage.price;
                document.getElementById('discount-label').textContent = `í• ì¸ (${selectedPackage.discount}%)`;
                document.getElementById('summary-discount').textContent = '-' + discountAmount.toLocaleString() + 'ì›';
            } else {
                document.getElementById('discount-row').style.display = 'none';
            }
            
            // ìƒí’ˆê¸ˆì•¡
            document.getElementById('summary-price').textContent = selectedPackage.price.toLocaleString() + 'ì›';
            
            // ë¶€ê°€ì„¸ (10%)
            const vat = Math.round(selectedPackage.price * 0.1);
            document.getElementById('summary-vat').textContent = vat.toLocaleString() + 'ì›';
            
            // ìµœì¢… ê²°ì œê¸ˆì•¡
            const total = selectedPackage.price + vat;
            document.getElementById('summary-total').textContent = total.toLocaleString() + 'ì›';
        }
        
        // ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ
        const paymentMethods = document.querySelectorAll('.payment-method');
        paymentMethods.forEach(method => {
            method.addEventListener('click', () => {
                paymentMethods.forEach(m => m.classList.remove('selected'));
                method.classList.add('selected');
            });
        });
        
        // ì—°ë½ì²˜ ìë™ í¬ë§·íŒ…
        const phoneInput = document.getElementById('phone');
        phoneInput.addEventListener('input', function(e) {
            // ìˆ«ìë§Œ ì¶”ì¶œ
            let value = e.target.value.replace(/[^0-9]/g, '');
            
            // í•˜ì´í”ˆ ìë™ ì¶”ê°€
            if (value.length <= 3) {
                e.target.value = value;
            } else if (value.length <= 7) {
                e.target.value = value.slice(0, 3) + '-' + value.slice(3);
            } else if (value.length <= 11) {
                e.target.value = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
            }
        });
        
        // ì—°ë½ì²˜ ìœ íš¨ì„± ê²€ì‚¬
        phoneInput.addEventListener('blur', function(e) {
            const value = e.target.value.replace(/[^0-9]/g, '');
            
            // ë¹ˆ ê°’ì´ë©´ ê²€ì‚¬ ê±´ë„ˆë›°ê¸° (í•„ìˆ˜ í•„ë“œ ê²€ì¦ì€ ë³„ë„ë¡œ ì²˜ë¦¬)
            if (value === '') return;
            
            // 010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸
            if (!value.startsWith('010')) {
                alert('ì—°ë½ì²˜ëŠ” 010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                // setTimeoutìœ¼ë¡œ í¬ì»¤ìŠ¤ë¥¼ ì§€ì—°ì‹œì¼œ alert ì°½ì´ ë‹«íŒ í›„ í¬ì»¤ìŠ¤ ì´ë™
                setTimeout(() => {
                    e.target.focus();
                    e.target.select();
                }, 100);
                return;
            }
            
            // 11ìë¦¬ í™•ì¸
            if (value.length !== 11) {
                alert('íœ´ëŒ€í° ë²ˆí˜¸ëŠ” 11ìë¦¬ì—¬ì•¼ í•©ë‹ˆë‹¤.\nì˜ˆ: 010-1234-5678');
                // setTimeoutìœ¼ë¡œ í¬ì»¤ìŠ¤ë¥¼ ì§€ì—°ì‹œì¼œ alert ì°½ì´ ë‹«íŒ í›„ í¬ì»¤ìŠ¤ ì´ë™
                setTimeout(() => {
                    e.target.focus();
                    e.target.select();
                }, 100);
                return;
            }
        });
        
        // ì´ë©”ì¼ ìœ íš¨ì„± ê²€ì‚¬
        const emailInput = document.getElementById('email');
        emailInput.addEventListener('blur', function(e) {
            const value = e.target.value.trim();
            
            if (value === '') return; // ë¹ˆ ê°’ì´ë©´ í•„ìˆ˜ ê²€ì¦ì—ì„œ ì²˜ë¦¬
            
            // ì´ë©”ì¼ í˜•ì‹ ì •ê·œí‘œí˜„ì‹
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            
            if (!emailRegex.test(value)) {
                alert('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.\nì˜ˆ: example@email.com');
                // setTimeoutìœ¼ë¡œ í¬ì»¤ìŠ¤ë¥¼ ì§€ì—°ì‹œì¼œ alert ì°½ì´ ë‹«íŒ í›„ í¬ì»¤ìŠ¤ ì´ë™
                setTimeout(() => {
                    e.target.focus();
                    e.target.select();
                }, 100);
                return;
            }
        });
        
        // ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ìë™ í¬ë§·íŒ… (ë§¤ì¥ëª…/ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ í•„ë“œ ìˆ¨ê¹€ ì²˜ë¦¬ë¡œ ì£¼ì„ ì²˜ë¦¬)
        /*
        const businessNumberInput = document.getElementById('business-number');
        if (businessNumberInput) {
            businessNumberInput.addEventListener('input', function(e) {
                // ìˆ«ìë§Œ ì¶”ì¶œ
                let value = e.target.value.replace(/[^0-9]/g, '');
                
                // í•˜ì´í”ˆ ìë™ ì¶”ê°€ (000-00-00000 í˜•ì‹)
                if (value.length <= 3) {
                    e.target.value = value;
                } else if (value.length <= 5) {
                    e.target.value = value.slice(0, 3) + '-' + value.slice(3);
                } else if (value.length <= 10) {
                    e.target.value = value.slice(0, 3) + '-' + value.slice(3, 5) + '-' + value.slice(5);
                }
            });
        }
        */
        
        // ì „ì²´ ë™ì˜ ì²´í¬ë°•ìŠ¤
        const agreeAll = document.getElementById('agree-all');
        const agreeItems = document.querySelectorAll('.agree-item');
        
        agreeAll.addEventListener('change', () => {
            agreeItems.forEach(item => {
                item.checked = agreeAll.checked;
            });
        });
        
        agreeItems.forEach(item => {
            item.addEventListener('change', () => {
                const allChecked = Array.from(agreeItems).every(i => i.checked);
                agreeAll.checked = allChecked;
            });
        });
        
        // ê²°ì œ ì²˜ë¦¬
        function processPayment() {
            // íŒ¨í‚¤ì§€ ì„ íƒ í™•ì¸
            if (!selectedPackage) {
                alert('íŒ¨í‚¤ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                // íŒ¨í‚¤ì§€ ì„ íƒ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                document.querySelector('.package-selection').scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // í•„ìˆ˜ ì…ë ¥ í•„ë“œ ì²´í¬ (ì²´í¬ë°•ìŠ¤ ì œì™¸)
            const requiredInputs = document.querySelectorAll('input[required]:not([type="checkbox"]), select[required], textarea[required]');
            let isValid = true;
            let firstInvalidInput = null;
            
            requiredInputs.forEach(input => {
                if (!input.value) {
                    isValid = false;
                    input.style.borderColor = 'var(--color-accent-hover)';
                    if (!firstInvalidInput) firstInvalidInput = input;
                } else {
                    input.style.borderColor = '';
                }
            });
            
            if (!isValid) {
                alert('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                if (firstInvalidInput) {
                    firstInvalidInput.focus();
                }
                return;
            }
            
            // í•„ìˆ˜ ì•½ê´€ ë™ì˜ ì²´í¬
            const requiredCheckboxes = document.querySelectorAll('.agree-item[required]');
            let allAgreed = true;
            
            requiredCheckboxes.forEach(checkbox => {
                if (!checkbox.checked) {
                    allAgreed = false;
                }
            });
            
            if (!allAgreed) {
                alert('í•„ìˆ˜ ì•½ê´€ì— ëª¨ë‘ ë™ì˜í•´ì£¼ì„¸ìš”.');
                // ì•½ê´€ ë™ì˜ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                document.querySelector('.agreement-section').scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // ì—°ë½ì²˜ ìœ íš¨ì„± ì¬í™•ì¸
            const phoneValue = document.getElementById('phone').value.replace(/[^0-9]/g, '');
            if (!phoneValue.startsWith('010')) {
                alert('ì—°ë½ì²˜ëŠ” 010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                setTimeout(() => {
                    document.getElementById('phone').focus();
                    document.getElementById('phone').select();
                }, 100);
                return;
            }
            if (phoneValue.length !== 11) {
                alert('íœ´ëŒ€í° ë²ˆí˜¸ëŠ” 11ìë¦¬ì—¬ì•¼ í•©ë‹ˆë‹¤.\nì˜ˆ: 010-1234-5678');
                setTimeout(() => {
                    document.getElementById('phone').focus();
                    document.getElementById('phone').select();
                }, 100);
                return;
            }
            
            // ì´ë©”ì¼ ìœ íš¨ì„± ì¬í™•ì¸
            const emailValue = document.getElementById('email').value.trim();
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailRegex.test(emailValue)) {
                alert('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.\nì˜ˆ: example@email.com');
                setTimeout(() => {
                    document.getElementById('email').focus();
                    document.getElementById('email').select();
                }, 100);
                return;
            }
            
            // ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ í™•ì¸
            const selectedPayment = document.querySelector('.payment-method.selected');
            if (!selectedPayment) {
                alert('ê²°ì œ ìˆ˜ë‹¨ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                document.querySelector('.payment-methods').scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // ê²°ì œ ì •ë³´ ì¤€ë¹„
            const paymentData = {
                package: {
                    name: 'ë¸”ë¡œê·¸ ì²´í—˜ë‹¨',
                    people: selectedPackage.people,
                    originalPrice: selectedPackage.originalPrice,
                    discountRate: selectedPackage.discount,
                    price: selectedPackage.price,
                    vat: Math.round(selectedPackage.price * 0.1),
                    total: selectedPackage.price + Math.round(selectedPackage.price * 0.1)
                },
                customer: {
                    company: document.getElementById('store-name') ? document.getElementById('store-name').value : '', // ì„œë¹„ìŠ¤ ì •ë³´ì˜ ë§¤ì¥ëª…
                    name: document.getElementById('name').value,
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                    businessType: document.getElementById('business-type') ? document.getElementById('business-type').value : '' // ì—…ì¢…
                },
                paymentMethod: selectedPayment.querySelector('.payment-name').textContent
            };
            
            console.log('Payment Data:', paymentData);

            // ê²°ì œ ì •ë³´ë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ (payment-completeì—ì„œ ì‚¬ìš©)
            localStorage.setItem('checkoutData', JSON.stringify({
                name: paymentData.customer.name,
                email: paymentData.customer.email,
                phone: paymentData.customer.phone,
                businessName: paymentData.customer.company || '',
                businessType: paymentData.customer.businessType || '',
                packageName: paymentData.package.name,
                packagePrice: paymentData.package.total,
                packagePeople: paymentData.package.people,
                timestamp: new Date().toISOString()
            }));

            // í˜ì´ì•± ê²°ì œ ìš”ì²­
            console.log('=== ê²°ì œ í”„ë¡œì„¸ìŠ¤ ì‹œì‘ ===');
            console.log('í˜ì´ì•± ë¼ì´ë¸ŒëŸ¬ë¦¬ í™•ì¸:', typeof PayApp);
            console.log('payAppReady:', window.payAppReady);
            console.log('CONFIG í™•ì¸:', CONFIG);
            
            // ê²°ì œ ìˆ˜ë‹¨ì— ë”°ë¥¸ openpaytype ì„¤ì •
            let payType = 'card';
            if (paymentData.paymentMethod === 'ê³„ì¢Œì´ì²´') {
                payType = 'rbank';
            } else if (paymentData.paymentMethod === 'ì¹´ì¹´ì˜¤í˜ì´') {
                payType = 'kakaopay';
            } else if (paymentData.paymentMethod === 'ë„¤ì´ë²„í˜ì´') {
                payType = 'naverpay';  
            } else if (paymentData.paymentMethod === 'í† ìŠ¤í˜ì´') {
                payType = 'tosspay';
            }
            
            // PayApp SDKê°€ ì¤€ë¹„ë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (window.payAppReady && typeof PayApp !== 'undefined') {
                console.log('âœ… PayApp SDK ì‚¬ìš© ê°€ëŠ¥');
                
                try {
                    // íŒŒë¼ë¯¸í„° ì´ˆê¸°í™”
                    if (PayApp.clearParam) {
                        PayApp.clearParam();
                    }
                    
                    // í•„ìˆ˜ íŒŒë¼ë¯¸í„° ì„¤ì •
                    PayApp.setParam('cmd', 'payrequest');  // ëª…ë ¹ì–´ ì¶”ê°€
                    PayApp.setParam('userid', CONFIG.userid);  // userid ëª…ì‹œì  ì„¤ì •
                    PayApp.setParam('linkkey', CONFIG.linkkey);  // linkkey í•„ìˆ˜
                    PayApp.setParam('goodname', `ë¯¸ë¸” ì²´í—˜ë‹¨ ${paymentData.package.people}ëª…`);
                    PayApp.setParam('price', paymentData.package.total.toString());
                    PayApp.setParam('recvphone', paymentData.customer.phone.replace(/-/g, ''));
                    PayApp.setParam('email', paymentData.customer.email || '');
                    PayApp.setParam('buyer', paymentData.customer.name);
                    PayApp.setParam('buyerphone', paymentData.customer.phone);
                    PayApp.setParam('buyeremail', paymentData.customer.email);
                    PayApp.setParam('memo', `ë¸”ë¡œê·¸ ì²´í—˜ë‹¨ ${paymentData.package.people}ëª… íŒ¨í‚¤ì§€`);
                    PayApp.setParam('smsuse', 'n');  // SMS ì‚¬ìš© ì•ˆí•¨
                    PayApp.setParam('redirectpay', '1');  // ë°”ë¡œ ê²°ì œì°½ìœ¼ë¡œ
                    PayApp.setParam('skip_cstpage', 'y');  // ê³ ê° ì •ë³´ ì…ë ¥ í˜ì´ì§€ ìŠ¤í‚µ
                    PayApp.setParam('openpaytype', payType);  // ê²°ì œ ìˆ˜ë‹¨
                    PayApp.setParam('var1', paymentData.package.people.toString());
                    PayApp.setParam('var2', paymentData.package.discountRate.toString());
                    // returnurl ì„¤ì • - POST ì²˜ë¦¬ë¥¼ ìœ„í•´ payment-redirect APIë¡œ
                    if (window.location.hostname.includes('vercel.app')) {
                        // Vercel í™˜ê²½ - payment-redirect APIë¡œ POST ì²˜ë¦¬
                        PayApp.setParam('returnurl', 'https://mamahome-five.vercel.app/api/payment-redirect');
                    } else if (window.location.hostname.includes('github.io')) {
                        // GitHub Pages í™˜ê²½ - Vercel APIë¡œ
                        PayApp.setParam('returnurl', 'https://mamahome-five.vercel.app/api/payment-redirect');
                    } else if (window.location.protocol === 'file:') {
                        // ë¡œì»¬ í…ŒìŠ¤íŠ¸ í™˜ê²½
                        PayApp.setParam('returnurl', 'https://mamahome-five.vercel.app/api/payment-redirect');
                    } else {
                        // ê¸°íƒ€ í™˜ê²½ - APIë¡œ
                        PayApp.setParam('returnurl', 'https://mamahome-five.vercel.app/api/payment-redirect');
                    }
                    // feedbackurl ì œê±° - ì—ëŸ¬ 70080 ë°©ì§€ (í˜ì´ì•±ì´ ì ‘ì†í•  ìˆ˜ ì—†ëŠ” URLì¼ ë•Œ)
                    // PayApp.setParam('feedbackurl', CONFIG.feedbackurl)
                    
                    console.log('PayApp íŒŒë¼ë¯¸í„° ì„¤ì • ì™„ë£Œ');
                    
                    // ê²°ì œì°½ í˜¸ì¶œ
                    PayApp.call();
                    console.log('âœ… PayApp.call() í˜¸ì¶œ ì™„ë£Œ');
                    
                    // ë¡œì»¬ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ê²°ì œ ì™„ë£Œ í›„ ì²˜ë¦¬
                    if (window.location.protocol === 'file:') {
                        alert('ê²°ì œê°€ ì™„ë£Œë˜ë©´ í™•ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.\nê²°ì œ ì™„ë£Œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
                        // ê²°ì œ ì™„ë£Œ í›„ ìˆ˜ë™ìœ¼ë¡œ ì™„ë£Œ í˜ì´ì§€ë¡œ ì´ë™
                        setTimeout(() => {
                            if (confirm('ê²°ì œë¥¼ ì™„ë£Œí•˜ì…¨ë‚˜ìš”?')) {
                                window.location.href = '../pages/payment-complete.html';
                            }
                        }, 3000);
                    }
                    
                } catch (error) {
                    console.error('âŒ PayApp SDK í˜¸ì¶œ ì˜¤ë¥˜:', error);
                    // SDK ì˜¤ë¥˜ ì‹œ í¼ ì „ì†¡ìœ¼ë¡œ í´ë°±
                    useFormFallback();
                }
            } else {
                // PayApp SDKê°€ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš°
                console.log('âš ï¸ PayApp SDKê°€ ì¤€ë¹„ë˜ì§€ ì•ŠìŒ');
                
                // SDK ë¡œë“œ ì¬ì‹œë„
                if (!window.payAppReady) {
                    console.log('SDK ë¡œë“œ ì¬ì‹œë„ ì¤‘...');
                    initPayApp();
                    
                    // 1ì´ˆ í›„ ë‹¤ì‹œ ì‹œë„
                    setTimeout(() => {
                        if (window.payAppReady && typeof PayApp !== 'undefined') {
                            console.log('SDK ë¡œë“œ ì„±ê³µ! ê²°ì œ ì§„í–‰');
                            processPayment(); // ì¬ê·€ í˜¸ì¶œ
                        } else {
                            console.log('SDK ë¡œë“œ ì‹¤íŒ¨, í¼ ì „ì†¡ ë°©ì‹ ì‚¬ìš©');
                            useFormFallback();
                        }
                    }, 1000);
                } else {
                    useFormFallback();
                }
            }
            
            // í¼ ì „ì†¡ í´ë°± í•¨ìˆ˜
            function useFormFallback() {
                console.log('ğŸ“ í¼ ì „ì†¡ ë°©ì‹ìœ¼ë¡œ ê²°ì œ ì§„í–‰');
                
                // ì»¤ìŠ¤í…€ ê²°ì œ ëª¨ë“ˆ ì‚¬ìš©
                if (window.PayappPayment) {
                    const paymentModule = new PayappPayment(CONFIG);
                    
                    paymentModule.requestPayment({
                        goodname: paymentData.customer.company || 'ë¯¸ì…ë ¥',
                        price: paymentData.package.total,
                        recvphone: paymentData.customer.phone,
                        buyer: paymentData.customer.name,
                        email: paymentData.customer.email,
                        memo: `ë¸”ë¡œê·¸ ì²´í—˜ë‹¨ ${paymentData.package.people}ëª… íŒ¨í‚¤ì§€`,
                        var1: paymentData.package.people,
                        var2: paymentData.package.discountRate,
                        paymentMethod: paymentData.paymentMethod
                    }, (result) => {
                        if (result.state === 'SUCCESS' || result.state === 'PROCESSING') {
                            console.log('ê²°ì œ ì²˜ë¦¬:', result.message);
                        } else if (result.state === 'ERROR') {
                            alert('ê²°ì œ ì²˜ë¦¬ ì‹¤íŒ¨: ' + result.message);
                        }
                    });
                } else {
                    // PayappPayment ëª¨ë“ˆë„ ì—†ëŠ” ê²½ìš° - ì§ì ‘ í¼ ì „ì†¡
                    console.log('ì§ì ‘ í¼ ì „ì†¡ ë°©ì‹ ì‚¬ìš©');
                    
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = 'https://api.payapp.kr/oapi/apiLoad.html';
                    form.target = 'payapp_window';
                    form.style.display = 'none';
                    
                    // íŒŒë¼ë¯¸í„° ì¶”ê°€
                    const params = {
                        cmd: 'payrequest',
                        userid: CONFIG.userid,
                        linkkey: CONFIG.linkkey,
                        goodname: paymentData.customer.company || 'ë¯¸ì…ë ¥',
                        price: paymentData.package.total.toString(),
                        recvphone: paymentData.customer.phone.replace(/-/g, ''),
                        buyer: paymentData.customer.name,
                        email: paymentData.customer.email,
                        memo: `ë¸”ë¡œê·¸ ì²´í—˜ë‹¨ ${paymentData.package.people}ëª… íŒ¨í‚¤ì§€`,
                        smsuse: 'n',
                        redirectpay: '1',
                        skip_cstpage: 'y',
                        reqaddr: '0',
                        var1: paymentData.package.people.toString(),
                        var2: paymentData.package.discountRate.toString(),
                        // feedbackurl ì œê±° - ì½œë°± ì„œë²„ ì—†ì„ ë•Œ ì—ëŸ¬ 70080 ë°©ì§€
                        returnurl: window.location.origin + '/pages/payment-complete.html'
                    };
                    
                    // ê²°ì œ ìˆ˜ë‹¨ë³„ openpaytype
                    if (paymentData.paymentMethod === 'ê³„ì¢Œì´ì²´') params.openpaytype = 'rbank';
                    else if (paymentData.paymentMethod === 'ì¹´ì¹´ì˜¤í˜ì´') params.openpaytype = 'kakaopay';
                    else if (paymentData.paymentMethod === 'ë„¤ì´ë²„í˜ì´') params.openpaytype = 'naverpay';
                    else if (paymentData.paymentMethod === 'í† ìŠ¤í˜ì´') params.openpaytype = 'tosspay';
                    else params.openpaytype = 'card';
                    
                    // ìƒˆì°½ ì—´ê¸°
                    const payWindow = window.open('', 'payapp_window', 'width=720,height=800,scrollbars=yes,resizable=yes');
                    
                    if (payWindow) {
                        // input í•„ë“œ ìƒì„±
                        for (const [key, value] of Object.entries(params)) {
                            const input = document.createElement('input');
                            input.type = 'hidden';
                            input.name = key;
                            input.value = value;
                            form.appendChild(input);
                        }
                        
                        // í¼ ì œì¶œ
                        document.body.appendChild(form);
                        form.submit();
                        
                        // í¼ ì œê±°
                        setTimeout(() => {
                            document.body.removeChild(form);
                        }, 100);
                        
                        console.log('âœ… ê²°ì œì°½ ì—´ê¸° ì„±ê³µ');
                    } else {
                        alert('íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. íŒì—…ì„ í—ˆìš©í•œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                    }
                }
            }
        }
        
        // URL íŒŒë¼ë¯¸í„°ë¡œ íŒ¨í‚¤ì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        const packageId = urlParams.get('package');
        console.log('Selected package:', packageId);
        
        // ì´ˆê¸° íŒ¨í‚¤ì§€ ì„ íƒ í•¨ìˆ˜ (ëª¨ë“  ì´ˆê¸°í™” í›„ ì‹¤í–‰)
        function initializeDefaultPackage() {
            console.log('=== ì´ˆê¸° íŒ¨í‚¤ì§€ ì„ íƒ ì‹œì‘ ===');
            
            // 60ëª… íŒ¨í‚¤ì§€ ìš”ì†Œ ì°¾ê¸°
            const sixtyPackage = document.querySelector('.package-option[data-people="60"]');
            console.log('60ëª… íŒ¨í‚¤ì§€ ìš”ì†Œ:', sixtyPackage);
            
            if (!sixtyPackage) {
                console.error('60ëª… íŒ¨í‚¤ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            // ëª¨ë“  íŒ¨í‚¤ì§€ì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
            const allPackages = document.querySelectorAll('.package-option');
            allPackages.forEach(pkg => {
                pkg.classList.remove('selected');
            });
            
            // 60ëª… íŒ¨í‚¤ì§€ì— selected í´ë˜ìŠ¤ ì¶”ê°€
            sixtyPackage.classList.add('selected');
            console.log('60ëª… íŒ¨í‚¤ì§€ì— selected í´ë˜ìŠ¤ ì¶”ê°€ ì™„ë£Œ');
            
            // ì„ íƒëœ íŒ¨í‚¤ì§€ ë°ì´í„° ì„¤ì •
            selectedPackage = {
                people: '60',
                originalPrice: 600000,
                price: 360000,
                discount: 40
            };
            console.log('selectedPackage ì„¤ì • ì™„ë£Œ:', selectedPackage);
            
            // ì£¼ë¬¸ ìš”ì•½ ê°•ì œ ì—…ë°ì´íŠ¸
            const summaryEmpty = document.getElementById('summary-empty');
            const summaryContent = document.getElementById('summary-content');
            
            if (summaryEmpty && summaryContent) {
                summaryEmpty.style.display = 'none';
                summaryContent.style.display = 'block';
                
                // ê° í•­ëª© ì§ì ‘ ì—…ë°ì´íŠ¸
                document.getElementById('summary-people').textContent = '60ëª…';
                document.getElementById('summary-original').textContent = '600,000ì›';
                document.getElementById('discount-row').style.display = 'flex';
                document.getElementById('discount-label').textContent = 'í• ì¸ (40%)';
                document.getElementById('summary-discount').textContent = '-240,000ì›';
                document.getElementById('summary-price').textContent = '360,000ì›';
                document.getElementById('summary-vat').textContent = '36,000ì›';
                document.getElementById('summary-total').textContent = '396,000ì›';
                
                console.log('ì£¼ë¬¸ ìš”ì•½ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            }
            
            console.log('=== ì´ˆê¸° íŒ¨í‚¤ì§€ ì„ íƒ ì™„ë£Œ ===');
        }
        
        // initializePage í•¨ìˆ˜ ì •ì˜ (ì§€ì—° ì—†ì´ ì¦‰ì‹œ ì‹¤í–‰)
        function initializePage() {
            console.log('í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
            // ì§€ì—° ì—†ì´ ë°”ë¡œ ì‹¤í–‰
            initializeDefaultPackage();

            // ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ìë™ ì…ë ¥
            autoFillUserInfo();
        }

        // ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ì±„ìš°ëŠ” í•¨ìˆ˜
        async function autoFillUserInfo() {
            let userInfo = null;

            // ë¨¼ì € ë§ˆì´í˜ì´ì§€ì—ì„œ ì „ë‹¬ëœ ë°ì´í„° í™•ì¸
            const checkoutUserData = localStorage.getItem('checkoutUserData');
            if (checkoutUserData) {
                try {
                    userInfo = JSON.parse(checkoutUserData);
                    console.log('ë§ˆì´í˜ì´ì§€ì—ì„œ ì „ë‹¬ëœ ì‚¬ìš©ì ì •ë³´:', userInfo);
                    // ì‚¬ìš© í›„ ì‚­ì œ (ë³´ì•ˆìƒ)
                    localStorage.removeItem('checkoutUserData');
                } catch (e) {
                    console.error('checkoutUserData íŒŒì‹± ì˜¤ë¥˜:', e);
                }
            }

            // checkoutUserDataê°€ ì—†ìœ¼ë©´ localStorageì˜ userInfo ì§ì ‘ ì‚¬ìš©
            if (!userInfo) {
                // localStorageì—ì„œ userInfo ê°€ì ¸ì˜¤ê¸°
                const storedUserInfo = localStorage.getItem('userInfo') || sessionStorage.getItem('userInfo');
                if (storedUserInfo) {
                    try {
                        userInfo = JSON.parse(storedUserInfo);
                        console.log('localStorageì—ì„œ ê°€ì ¸ì˜¨ ì‚¬ìš©ì ì •ë³´:', userInfo);
                    } catch (e) {
                        console.error('userInfo íŒŒì‹± ì˜¤ë¥˜:', e);
                    }
                }
            }

            if (userInfo) {
                // JSON ë¬¸ìì—´ì¸ ê²½ìš° íŒŒì‹±
                if (typeof userInfo === 'string') {
                    try {
                        userInfo = JSON.parse(userInfo);
                    } catch (e) {
                        console.error('ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', e);
                    }
                }

                // ì´ë¦„ ìë™ ì…ë ¥
                if (userInfo.name) {
                    const nameInput = document.getElementById('name');
                    if (nameInput) {
                        nameInput.value = userInfo.name;
                        nameInput.style.borderColor = '';
                    }
                }

                // ì´ë©”ì¼ ìë™ ì…ë ¥
                if (userInfo.email) {
                    const emailInput = document.getElementById('email');
                    if (emailInput) {
                        emailInput.value = userInfo.email;
                        emailInput.style.borderColor = '';
                    }
                }

                // ì „í™”ë²ˆí˜¸ ìë™ ì…ë ¥
                if (userInfo.phone) {
                    const phoneInput = document.getElementById('phone');
                    if (phoneInput) {
                        phoneInput.value = userInfo.phone;
                        phoneInput.style.borderColor = '';
                    }
                }

                // ì—…ì²´ëª… ìë™ ì…ë ¥ (company í•„ë“œ)
                if (userInfo.businessName || userInfo.business_name) {
                    const companyInput = document.getElementById('company');
                    if (companyInput) {
                        companyInput.value = userInfo.businessName || userInfo.business_name;
                        companyInput.style.borderColor = '';
                    }
                }

                // ì‚¬ì—…ìë²ˆí˜¸ ìë™ ì…ë ¥ (business-number í•„ë“œ)
                if (userInfo.businessNumber || userInfo.business_number) {
                    const businessNumberInput = document.getElementById('business-number');
                    if (businessNumberInput) {
                        businessNumberInput.value = userInfo.businessNumber || userInfo.business_number;
                        businessNumberInput.style.borderColor = '';
                    }
                }

                console.log('âœ… ì‚¬ìš©ì ì •ë³´ ìë™ ì…ë ¥ ì™„ë£Œ');
            }
        }

        // ì‚¬ìš©ì ë°ì´í„°ë¡œ í¼ ì±„ìš°ê¸° í—¬í¼ í•¨ìˆ˜
        function fillFormWithUserData(userInfo) {
            if (typeof userInfo === 'string') {
                try {
                    userInfo = JSON.parse(userInfo);
                } catch (e) {
                    console.error('ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', e);
                    return;
                }
            }

            // ì´ë¦„ ìë™ ì…ë ¥
            if (userInfo.name) {
                const nameInput = document.getElementById('name');
                if (nameInput) nameInput.value = userInfo.name;
            }

            // ì´ë©”ì¼ ìë™ ì…ë ¥
            if (userInfo.email) {
                const emailInput = document.getElementById('email');
                if (emailInput) emailInput.value = userInfo.email;
            }

            // ì „í™”ë²ˆí˜¸ ìë™ ì…ë ¥
            if (userInfo.phone) {
                const phoneInput = document.getElementById('phone');
                if (phoneInput) phoneInput.value = userInfo.phone;
            }

            // ì—…ì²´ëª… ìë™ ì…ë ¥ (company í•„ë“œ)
            if (userInfo.businessName || userInfo.business_name) {
                const companyInput = document.getElementById('company');
                if (companyInput) {
                    companyInput.value = userInfo.businessName || userInfo.business_name;
                }
            }

            // ì‚¬ì—…ìë²ˆí˜¸ ìë™ ì…ë ¥ (business-number í•„ë“œ)
            if (userInfo.businessNumber || userInfo.business_number) {
                const businessNumberInput = document.getElementById('business-number');
                if (businessNumberInput) {
                    businessNumberInput.value = userInfo.businessNumber || userInfo.business_number;
                }
            }
        }
        
        // ì…ë ¥ í•„ë“œ ì‹¤ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬
        document.querySelectorAll('input[required]').forEach(input => {
            if (input.type !== 'checkbox') {
                input.addEventListener('blur', () => {
                    if (input.value.trim()) {
                        input.style.borderColor = '';
                    } else {
                        input.style.borderColor = 'var(--color-accent-hover)';
                    }
                });
                
                input.addEventListener('input', () => {
                    if (input.value.trim()) {
                        input.style.borderColor = '';
                    }
                });
            }
        });
    </script>
</body>
</html>